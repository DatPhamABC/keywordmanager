{% extends "base.html" %}
{% block css %}
    <link rel="stylesheet" href="{{ url_for('static', filename='/search.css') }}">
    <script src="/static/search.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/buttons/1.3.1/js/dataTables.buttons.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/buttons/1.3.1/js/buttons.html5.min.js"></script>
{% endblock %}

{% block title %}
    Filter
{% endblock %}

{% block navbar %}
<ul class="navbar-nav me-auto">
    <li class="nav-item">
        <a class="nav-link" href="/import">Import</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" style="color:#FFF3E4" href="/search">Tìm kiếm</a>
    </li>
</ul>
{% endblock %}

{% block body %}
    <div class="container-search-bar">
        <div class="row">
            <div class="col-xs-8 col-xs-offset-2">
                <div class="input-group">
                    <form class="search-form" action="/search" method="GET" autocomplete="off">
                        <div class="input-block">
                            <div class="input-group-btn search-panel">
                                <div class="dropdown">
                                    <label for="campaign_input">Campaign </label>
                                    <select id="campaign_input" name="campaign-filter" class="form-select edit">
                                        <optgroup>
                                            <option value="Tất cả">Tất cả</option>
                                            <option disabled>________</option>
                                            {% for item in campaign_list %}
                                                <option value="{{item[0]}}">{{item[0]}}</option>
                                            {%endfor%}
                                        </optgroup>
                                    </select>
                                </div>
                                <div class="dropdown">
                                    <label for="adgroup_input">Adgroup</label>
                                    <select id="adgroup_input" name="adgroup-filter" class="form-select edit">
                                        <optgroup>
                                            <option value="Tất cả">Tất cả</option>
                                            <option disabled>________</option>
                                            {% for item in adgroup_list %}
                                                <option value="{{item[0]}}">{{item[0]}}</option>
                                            {%endfor%}
                                        </optgroup>
                                    </select>
                                </div>
                                <div class="dropdown">
                                    <label for="province_input">Province</label>
                                    <select id="province_input" name="province-filter" class="form-select edit">
                                        <optgroup>
                                            <option value="Tất cả">Tất cả</option>
                                            <option disabled>________</option>
                                            {% for item in province_list %}
                                                <option value="{{item[0]}}">{{item[0]}}</option>
                                            {%endfor%}
                                        </optgroup>
                                    </select>
                                </div>
                                <div class="dropdown">
                                    <label for="district_input">District</label>
                                    <select id="district_input" name="district-filter" class="form-select edit">
                                        <optgroup>
                                             <option value="Tất cả">Tất cả</option>
                                            <option disabled>________</option>
                                            {% for item in district_list %}
                                                <option value="{{item[0]}}">{{item[0]}}</option>
                                            {%endfor%}
                                        </optgroup>
                                    </select>
                                </div>
                                <div class="dropdown">
                                    <label for="hotel_input">Hotel</label>
                                    <select id="hotel_input" name="hotel-filter" class="form-select edit">
                                        <optgroup>
                                            <option value="Tất cả">Tất cả</option>
                                            <option disabled>________</option>
                                            {% for item in hotel_list %}
                                                <option value="{{item[0]}}">{{item[0]}}</option>
                                            {%endfor%}
                                        </optgroup>
                                    </select>
                                </div>
                                <div class="dropdown">
                                    <label for="kwtype_input">Keyword type</label>
                                    <select id="kwtype_input" name="kwtype-filter" class="form-select edit">
                                        <optgroup>
                                            <option value="Tất cả">Tất cả</option>
                                            <option disabled>________</option>
                                            <option value="positive">positive</option>
                                            <option value="negative">negative</option>
                                        </optgroup>
                                    </select>
                                </div>
                            </div>
                            <div class="input-bar-btn">
                                <span class="input-group-btn">
                                    <button class="btn btn-primary" type="submit"><span class="fa fa-search"></span></button>
                                </span>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <div>
        <table id="table-detail" class="table table-striped">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Keyword</th>
                    <th>Level</th>
                    <th>Positive/Negative</th>
                    <th>Level name</th>
                    <th>Target name</th>
                    <th>Target type</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                {% for item in keyword_list %}
                    <tr>
                        <td>{{ item[0] }}</td>
                        {% if item[2] == 'phrase' %}
                            <td>"{{ item[1] }}"</td>
                        {% elif item[2] == 'exact' %}
                            <td>[{{ item[1] }}]</td>
                        {% else %}
                            <td>{{ item[1] }}</td>
                        {% endif %}
                        <td>{{ item[3] }}</td>
                        <td>{{ item[4] }}</td>
                        <td>{{ item[5] }}</td>
                        <td>{{ item[6] }}</td>
                        <td>{{ item[7] }}</td>
                        <td>
                            <a href="{{ url_for('.keyword_edit', id=item[0])|urlencode }}">Sửa</a>
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
        <a class="btn btn-secondary" href="/export">Export</a>
    </div>
{% endblock %}